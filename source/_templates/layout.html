{% extends "!layout.html" %}

{% block extrahead %}
  {{ super() }}
  {% if "Chapter" in pagename %}
    {% set parts = pagename.split('/') %}
    {% set chapter_num = parts[-1].split(' ')[1] %}
    {% set folder_key = parts[-2].replace(' ', '_') %}
    <script type="text/javascript">
      window.MathJax = {
        tex: {
          tags: 'ams',
          useLabelIds: true,
          tagSide: 'right',
          tagIndent: '0em',
          tagFormat: {
            number: function (n) {
              return "{{ folder_key }}_{{ chapter_num }}." + n;
            }
          }
        },
        options: {
          enableMenu: false,
          displayAlign: 'right'
        }
      };
    </script>
  {% endif %}
{% endblock %}
